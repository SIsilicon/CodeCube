[gd_scene load_steps=48 format=2]

[ext_resource path="res://Main.gd" type="Script" id=1]
[ext_resource path="res://button_icons/Grid Button/Grid_Edit_Icon.svg" type="Texture" id=2]
[ext_resource path="res://GridMap.gd" type="Script" id=3]
[ext_resource path="res://button_icons/Open Button/open_icon.svg" type="Texture" id=4]
[ext_resource path="res://program blocks/ProgramWorkshop.gd" type="Script" id=5]
[ext_resource path="res://program blocks/LinkHandler.gd" type="Script" id=6]
[ext_resource path="res://program blocks/LinkRenderer.gd" type="Script" id=7]
[ext_resource path="res://button_icons/Save Button/save_icon.svg" type="Texture" id=8]
[ext_resource path="res://program blocks/Selector/Selector.tscn" type="PackedScene" id=10]
[ext_resource path="res://program blocks/drawer.svg" type="Texture" id=11]
[ext_resource path="res://program blocks/BlockSelector.gd" type="Script" id=12]
[ext_resource path="res://program blocks/AndersonGrotesk-Ultrabold.otf" type="DynamicFontData" id=13]
[ext_resource path="res://button_icons/Play Button/play_icon.svg" type="Texture" id=14]
[ext_resource path="res://button_icons/Play Button/play_icon_pressed.svg" type="Texture" id=15]
[ext_resource path="res://button_icons/Play Button/play_icon_mask.svg" type="BitMap" id=16]
[ext_resource path="res://button_icons/Pause Button/pause_icon.svg" type="Texture" id=17]
[ext_resource path="res://button_icons/Pause Button/pause_icon_pressed.svg" type="Texture" id=18]
[ext_resource path="res://button_icons/Pause Button/pause_icon_mask.svg" type="BitMap" id=19]
[ext_resource path="res://button_icons/Reset Button/reset_icon.svg" type="Texture" id=20]
[ext_resource path="res://button_icons/Reset Button/reset_icon_pressed.svg" type="Texture" id=21]
[ext_resource path="res://button_icons/Reset Button/reset_icon_mask.svg" type="BitMap" id=22]
[ext_resource path="res://MapEditor.gd" type="Script" id=23]

[sub_resource type="SpatialMaterial" id=1]
flags_transparent = true
flags_unshaded = true
vertex_color_use_as_albedo = true
params_specular_mode = 4
params_billboard_mode = 1
albedo_color = Color( 0.929412, 0.988235, 0.803922, 1 )
proximity_fade_enable = true
proximity_fade_distance = 2.0
distance_fade_mode = 1
distance_fade_min_distance = 0.0
distance_fade_max_distance = 2.0

[sub_resource type="QuadMesh" id=2]
material = SubResource( 1 )
size = Vector2( 0.3, 0.3 )

[sub_resource type="Gradient" id=3]
offsets = PoolRealArray( 0, 0.520362, 1 )
colors = PoolColorArray( 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0 )

[sub_resource type="ProceduralSky" id=4]
sky_top_color = Color( 0.662745, 0.862745, 0.6, 1 )
sky_horizon_color = Color( 0.74902, 0.909804, 0.647059, 1 )
sky_curve = 0.428114
ground_bottom_color = Color( 0.698039, 0.847059, 0.698039, 1 )
ground_horizon_color = Color( 0.74902, 0.909804, 0.647059, 1 )
ground_curve = 0.393966
sun_angle_min = 0.0
sun_curve = 0.000112177
sun_energy = 0.0

[sub_resource type="Environment" id=5]
background_mode = 2
background_sky = SubResource( 4 )
background_color = Color( 1, 1, 1, 1 )
ambient_light_color = Color( 1, 1, 1, 1 )
ambient_light_sky_contribution = 0.5
fog_enabled = true
fog_color = Color( 0.705882, 0.858824, 0.690196, 1 )
fog_depth_enabled = false
fog_depth_end = 0.0
fog_depth_curve = 0.450625
fog_transmit_curve = 0.535887
fog_height_enabled = true
fog_height_min = 0.0
fog_height_max = -20.0
fog_height_curve = 0.901251
ss_reflections_fade_in = 0.409812
ss_reflections_depth_tolerance = 0.4
ssao_intensity2 = 0.0
ssao_bias = 0.001
ssao_color = Color( 0.2, 0.2, 0.2, 1 )
ssao_blur = 2
glow_enabled = true
glow_levels/2 = true
glow_hdr_threshold = 1.5
glow_bicubic_upscale = true
adjustment_enabled = true
adjustment_brightness = 0.99
adjustment_contrast = 1.22

[sub_resource type="StyleBoxFlat" id=6]
bg_color = Color( 0.6, 0.6, 0.6, 0.584314 )

[sub_resource type="Environment" id=7]
background_mode = 1
ambient_light_color = Color( 1, 1, 1, 1 )
ambient_light_energy = 0.5
ambient_light_sky_contribution = 0.0
dof_blur_near_distance = 2.24

[sub_resource type="World" id=8]
environment = SubResource( 7 )

[sub_resource type="InputEventKey" id=9]
control = true
command = true
scancode = 83

[sub_resource type="ShortCut" id=10]
shortcut = SubResource( 9 )

[sub_resource type="InputEventKey" id=11]
control = true
command = true
scancode = 79

[sub_resource type="ShortCut" id=12]
shortcut = SubResource( 11 )

[sub_resource type="StyleBoxFlat" id=13]
bg_color = Color( 0.403922, 0.403922, 0.403922, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.184314, 0.184314, 0.184314, 1 )
corner_radius_top_left = 6
corner_radius_top_right = 6
corner_radius_bottom_right = 6
corner_radius_bottom_left = 6
corner_detail = 1
expand_margin_left = 4.0
expand_margin_right = 4.0

[sub_resource type="StyleBoxFlat" id=14]
bg_color = Color( 0.25098, 0.25098, 0.25098, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.184314, 0.184314, 0.184314, 1 )
corner_radius_top_left = 6
corner_radius_top_right = 6
corner_radius_bottom_right = 6
corner_radius_bottom_left = 6
corner_detail = 1
expand_margin_left = 4.0
expand_margin_right = 4.0

[sub_resource type="StyleBoxFlat" id=15]
bg_color = Color( 0.176471, 0.176471, 0.176471, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.184314, 0.184314, 0.184314, 1 )
corner_radius_top_left = 6
corner_radius_top_right = 6
corner_radius_bottom_right = 6
corner_radius_bottom_left = 6
corner_detail = 1
expand_margin_left = 4.0
expand_margin_right = 4.0

[sub_resource type="StyleBoxFlat" id=16]
content_margin_top = 4.0
content_margin_bottom = 4.0
bg_color = Color( 0.25098, 0.25098, 0.25098, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.184314, 0.184314, 0.184314, 1 )
corner_radius_top_left = 6
corner_radius_top_right = 6
corner_radius_bottom_right = 6
corner_radius_bottom_left = 6
corner_detail = 1
expand_margin_left = 4.0
expand_margin_top = 4.0
expand_margin_bottom = 4.0

[sub_resource type="StyleBoxFlat" id=17]
bg_color = Color( 0.25098, 0.25098, 0.25098, 1 )
border_width_left = 5
border_width_top = 5
border_width_right = 5
border_width_bottom = 5
border_color = Color( 0.184314, 0.184314, 0.184314, 1 )
corner_radius_top_left = 18
corner_radius_top_right = 18
corner_radius_bottom_right = 18
corner_radius_bottom_left = 18
corner_detail = 1
expand_margin_left = 4.0
expand_margin_top = 4.0
expand_margin_bottom = 4.0

[sub_resource type="StyleBoxFlat" id=18]
bg_color = Color( 0.321569, 0.321569, 0.321569, 1 )
border_width_left = 2
border_width_top = 33
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.831373, 0.831373, 0.831373, 1 )
corner_radius_top_left = 12
corner_radius_top_right = 12
corner_radius_bottom_right = 20
corner_radius_bottom_left = 20
corner_detail = 1
expand_margin_top = 40.0
shadow_color = Color( 0, 0, 0, 0.372549 )
shadow_size = 16

[sub_resource type="Theme" id=19]
Button/colors/font_color = Color( 0.88, 0.88, 0.88, 1 )
Button/colors/font_color_disabled = Color( 0.9, 0.9, 0.9, 0.2 )
Button/colors/font_color_hover = Color( 0.94, 0.94, 0.94, 1 )
Button/colors/font_color_pressed = Color( 1, 1, 1, 1 )
Button/constants/hseparation = 4
Button/styles/disabled = null
Button/styles/focus = null
Button/styles/hover = SubResource( 13 )
Button/styles/normal = SubResource( 14 )
Button/styles/pressed = SubResource( 15 )
LineEdit/styles/normal = SubResource( 16 )
Tree/styles/bg = SubResource( 17 )
WindowDialog/colors/title_color = Color( 0, 0, 0, 1 )
WindowDialog/constants/close_h_ofs = 38
WindowDialog/constants/close_v_ofs = 36
WindowDialog/constants/scaleborder_size = 8
WindowDialog/constants/title_height = 40
WindowDialog/fonts/title_font = null
WindowDialog/icons/close = null
WindowDialog/icons/close_highlight = null
WindowDialog/styles/panel = SubResource( 18 )

[sub_resource type="StyleBoxFlat" id=20]
bg_color = Color( 0.87451, 0.87451, 0.87451, 1 )
shadow_color = Color( 0, 0, 0, 0.258824 )
shadow_size = 20

[sub_resource type="DynamicFont" id=21]
size = 20
outline_size = 1
outline_color = Color( 0.352941, 0.352941, 0.352941, 0.435294 )
use_filter = true
font_data = ExtResource( 13 )

[sub_resource type="StyleBoxFlat" id=22]
bg_color = Color( 0.490196, 0.478431, 0.478431, 1 )
border_width_top = 1
border_width_bottom = 1
border_color = Color( 0.45098, 0.45098, 0.45098, 1 )
corner_radius_top_right = 7
corner_radius_bottom_right = 7
expand_margin_left = 3.0

[sub_resource type="StyleBoxFlat" id=23]
bg_color = Color( 0.847059, 0.847059, 0.847059, 1 )
border_width_top = 1
border_width_bottom = 1
border_color = Color( 0.45098, 0.45098, 0.45098, 1 )
border_blend = true
corner_radius_bottom_right = 5
corner_detail = 1
expand_margin_left = 9.0
anti_aliasing_size = 2

[sub_resource type="Theme" id=24]
Button/colors/font_color = Color( 0.121569, 0.121569, 0.121569, 1 )
Button/colors/font_color_disabled = Color( 0, 0, 0, 0.678431 )
Button/colors/font_color_hover = Color( 0.121569, 0.121569, 0.121569, 1 )
Button/colors/font_color_pressed = Color( 0.121569, 0.121569, 0.121569, 1 )
Button/constants/hseparation = 2
Button/fonts/font = SubResource( 21 )
Button/styles/disabled = SubResource( 22 )
Button/styles/focus = SubResource( 23 )
Button/styles/hover = SubResource( 23 )
Button/styles/normal = SubResource( 23 )
Button/styles/pressed = SubResource( 23 )

[sub_resource type="StyleBoxFlat" id=25]
bg_color = Color( 1, 0.254902, 0.254902, 0.498039 )

[node name="Main" type="Spatial"]
script = ExtResource( 1 )
sandbox_mode = true
manual_control = true

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.548941, -0.521079, 0.65356, 0, 0.7819, 0.623404, -0.835861, -0.342212, 0.429217, 0, 9.99593, 0 )
light_energy = 1.52
shadow_enabled = true
shadow_bias = 0.09
shadow_contact = 0.06
directional_shadow_normal_bias = 0.06
directional_shadow_max_distance = 80.0

[node name="GridMap" type="Spatial" parent="."]
script = ExtResource( 3 )
save_file = "res://test_level.cclevel"

[node name="CameraFollow" type="Spatial" parent="."]
transform = Transform( -1, 1.1567e-07, -9.70582e-08, 0, 0.642788, 0.766044, 1.50996e-07, 0.766044, -0.642788, -2, 6.59487, -8.30323 )

[node name="Camera" type="InterpolatedCamera" parent="."]
transform = Transform( -1, 1.1567e-07, -9.70584e-08, 0, 0.642788, 0.766044, 1.50996e-07, 0.766044, -0.642788, -2, 6.59487, -8.30323 )
current = true
frustum_offset = Vector2( -0.14, 0.386 )
target = NodePath("../CameraFollow")
speed = 8.0
enabled = true

[node name="CPUParticles" type="CPUParticles" parent="Camera"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 2.38419e-07, 1.43051e-06, -7.15256e-07 )
amount = 3000
lifetime = 3.0
preprocess = 3.0
local_coords = false
mesh = SubResource( 2 )
emission_shape = 2
emission_box_extents = Vector3( 40, 40, 40 )
spread = 180.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 0.9
initial_velocity_random = 0.51
angular_velocity = -2.38536e+38
color_ramp = SubResource( 3 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 5 )

[node name="Controls" type="HBoxContainer" parent="."]
anchor_right = 1.0
margin_bottom = 66.0
alignment = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Play" type="TextureButton" parent="Controls"]
margin_left = 958.0
margin_right = 1024.0
margin_bottom = 66.0
texture_normal = ExtResource( 14 )
texture_pressed = ExtResource( 15 )
texture_click_mask = ExtResource( 16 )

[node name="Pause" type="TextureButton" parent="Controls"]
visible = false
margin_left = 888.0
margin_right = 954.0
margin_bottom = 66.0
texture_normal = ExtResource( 17 )
texture_pressed = ExtResource( 18 )
texture_click_mask = ExtResource( 19 )

[node name="Reset" type="TextureButton" parent="Controls"]
visible = false
margin_left = 958.0
margin_right = 1024.0
margin_bottom = 66.0
texture_normal = ExtResource( 20 )
texture_pressed = ExtResource( 21 )
texture_click_mask = ExtResource( 22 )

[node name="MapEditor" type="Panel" parent="."]
anchor_left = 0.5
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 199.0
margin_right = 1.0
custom_styles/panel = SubResource( 6 )
script = ExtResource( 23 )
__meta__ = {
"_edit_use_anchors_": false
}
grid_map = NodePath("../../Main/GridMap")

[node name="Viewport" type="Viewport" parent="MapEditor"]
size = Vector2( 128, 128 )
own_world = true
world = SubResource( 8 )
transparent_bg = true
msaa = 2
hdr = false
render_target_v_flip = true

[node name="Camera" type="Camera" parent="MapEditor/Viewport"]
transform = Transform( 1, 8.74228e-08, 3.82137e-15, 0, -4.37114e-08, 1, 8.74228e-08, -1, -4.37114e-08, 0, 2, 0 )
projection = 1
size = 1.2
far = 10.0

[node name="DirectionalLight" type="DirectionalLight" parent="MapEditor/Viewport"]
transform = Transform( 0.573577, -1.27084e-08, -0.819152, 0.627507, 0.642788, 0.439385, 0.526541, -0.766044, 0.368688, 0, 3, 0 )

[node name="Scroll" type="ScrollContainer" parent="MapEditor"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 18.0
margin_top = 14.0
margin_bottom = -52.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBox" type="VBoxContainer" parent="MapEditor/Scroll"]
margin_right = 296.0
margin_bottom = 534.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="File" type="HBoxContainer" parent="MapEditor"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 560.0
margin_right = -5.0
alignment = 2
__meta__ = {
"_edit_group_": true,
"_edit_use_anchors_": false
}

[node name="Save" type="TextureButton" parent="MapEditor/File"]
margin_left = 225.0
margin_right = 263.0
margin_bottom = 40.0
shortcut = SubResource( 10 )
texture_normal = ExtResource( 8 )

[node name="Open" type="TextureButton" parent="MapEditor/File"]
margin_left = 271.0
margin_right = 309.0
margin_bottom = 40.0
shortcut = SubResource( 12 )
texture_normal = ExtResource( 4 )

[node name="Drawer" type="TextureButton" parent="MapEditor"]
anchor_bottom = 1.0
margin_left = -104.0
margin_top = 495.0
focus_mode = 0
toggle_mode = true
enabled_focus_mode = 0
texture_normal = ExtResource( 2 )
texture_pressed = ExtResource( 2 )
texture_hover = ExtResource( 2 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FileDialog" type="FileDialog" parent="MapEditor"]
anchor_left = -0.687
anchor_top = 0.5
anchor_right = -0.687
anchor_bottom = 0.5
margin_left = -287.413
margin_top = -208.342
margin_right = 287.587
margin_bottom = 230.658
theme = SubResource( 19 )
popup_exclusive = true
dialog_hide_on_ok = true
access = 1
filters = PoolStringArray( "*.cclevel ; Code Cube Level" )
current_dir = "user://levels"
current_path = "user://levels/"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Tween" type="Tween" parent="MapEditor"]

[node name="ProgramWorkshop" type="Panel" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
custom_styles/panel = SubResource( 6 )
script = ExtResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LinkHandler" type="Control" parent="ProgramWorkshop"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
script = ExtResource( 6 )
__meta__ = {
"_edit_lock_": true
}
links = {

}

[node name="LinkRenderer" type="Control" parent="ProgramWorkshop/LinkHandler"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = -1024.0
margin_bottom = -600.0
mouse_filter = 2
script = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}

[node name="Selector" parent="ProgramWorkshop/LinkHandler" instance=ExtResource( 10 )]
margin_left = 20.6505
margin_top = -117.967
margin_right = 120.651
margin_bottom = -17.967

[node name="File" type="HBoxContainer" parent="ProgramWorkshop"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -44.0
margin_right = -6.0
margin_bottom = -6.0
alignment = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Save" type="TextureButton" parent="ProgramWorkshop/File"]
margin_left = 934.0
margin_right = 972.0
margin_bottom = 38.0
shortcut = SubResource( 10 )
texture_normal = ExtResource( 8 )

[node name="Open" type="TextureButton" parent="ProgramWorkshop/File"]
margin_left = 980.0
margin_right = 1018.0
margin_bottom = 38.0
shortcut = SubResource( 12 )
texture_normal = ExtResource( 4 )

[node name="Drawer" type="TextureButton" parent="ProgramWorkshop"]
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
margin_left = -62.3818
margin_top = -112.0
margin_right = 63.6182
margin_bottom = 112.0
focus_mode = 0
enabled_focus_mode = 0
texture_normal = ExtResource( 11 )
expand = true
stretch_mode = 5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ScrollContainer" type="ScrollContainer" parent="ProgramWorkshop"]
anchor_right = 0.116
anchor_bottom = 1.0
margin_right = 118.152
rect_clip_content = false
custom_styles/bg = SubResource( 20 )
scroll_horizontal_enabled = false
script = ExtResource( 12 )
__meta__ = {
"_edit_use_anchors_": false
}
button_theme = SubResource( 24 )

[node name="Margin" type="MarginContainer" parent="ProgramWorkshop/ScrollContainer"]
margin_right = 236.936
margin_bottom = 600.0
mouse_filter = 1
size_flags_horizontal = 3
size_flags_vertical = 3
custom_constants/margin_right = 5

[node name="VBox" type="VBoxContainer" parent="ProgramWorkshop/ScrollContainer/Margin"]
margin_right = 231.0
margin_bottom = 600.0
rect_min_size = Vector2( 12.68, 118.99 )
rect_clip_content = true
size_flags_horizontal = 3
size_flags_vertical = 3
custom_constants/separation = 0
__meta__ = {
"_edit_lock_": true
}

[node name="FileDialog" type="FileDialog" parent="ProgramWorkshop"]
anchor_right = 1.0
anchor_bottom = 1.053
margin_left = 146.5
margin_top = 80.5
margin_right = -146.5
margin_bottom = -112.3
theme = SubResource( 19 )
popup_exclusive = true
dialog_hide_on_ok = true
access = 1
filters = PoolStringArray( "*.ccprogram ; Program Files" )
current_dir = "user://programs"
current_file = "new_prog.ccprogram"
current_path = "user://programs/new_prog.ccprogram"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Tween" type="Tween" parent="ProgramWorkshop"]

[node name="Error" type="Label" parent="."]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 0.21582
margin_bottom = 14.2158
custom_styles/normal = SubResource( 25 )
custom_colors/font_color = Color( 1, 0, 0, 1 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 0.490196 )
text = "The program has no stop function!"
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Tween" type="Tween" parent="."]
[connection signal="pressed" from="Controls/Play" to="." method="_on_Play_pressed"]
[connection signal="pressed" from="Controls/Pause" to="." method="_on_Pause_pressed"]
[connection signal="pressed" from="Controls/Reset" to="." method="_on_Reset_pressed"]
[connection signal="visibility_changed" from="MapEditor" to="MapEditor" method="_on_visibility_changed"]
[connection signal="pressed" from="MapEditor/File/Save" to="MapEditor" method="_on_Save_pressed"]
[connection signal="pressed" from="MapEditor/File/Open" to="MapEditor" method="_on_Open_pressed"]
[connection signal="toggled" from="MapEditor/Drawer" to="MapEditor" method="_on_Drawer_toggled"]
[connection signal="file_selected" from="MapEditor/FileDialog" to="MapEditor" method="_on_FileDialog_file_selected"]
[connection signal="pressed" from="ProgramWorkshop/File/Save" to="ProgramWorkshop" method="_on_Save_pressed"]
[connection signal="pressed" from="ProgramWorkshop/File/Open" to="ProgramWorkshop" method="_on_Open_pressed"]
[connection signal="pressed" from="ProgramWorkshop/Drawer" to="ProgramWorkshop" method="_on_Drawer_pressed"]
[connection signal="pressed" from="ProgramWorkshop/Drawer" to="MapEditor" method="_on_Program_Drawer_pressed"]
[connection signal="pressed" from="ProgramWorkshop/Drawer" to="." method="_on_Drawer_pressed"]
[connection signal="file_selected" from="ProgramWorkshop/FileDialog" to="ProgramWorkshop" method="_on_FileDialog_file_selected"]
